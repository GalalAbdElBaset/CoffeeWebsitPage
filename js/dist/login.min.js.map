{"version":3,"sources":["login.js"],"names":["body","document","getElementById","icon","btn","querySelector","saved","localStorage","getItem","remove","classList","add","setItem","addEventListener","setTimeout","contains","isLight","passwordIn","signUpBtn","popupBox","createElement","popupClose","popupIcon","innerHTML","appendChild","showPopup","message","type","arguments","length","undefined","callback","popupMessage","textContent","autoClose","onclick","clearTimeout","loginBtn","JSON","username","usernameIn","value","trim","Array","isArray","storedUsers","password","foundUser","parse","filter","u","users","find","user","stringify","concat","window","location","href","email","emailIn","emailPattern","test","_unused2","some","userExists","push","newUser","e","persisted","replace","togglePassword","passwordField","getAttribute","setAttribute","toggle"],"mappings":"AAAA,cAIA,WACA,IAAMA,EAAIC,SAAWC,eAArB,gBACMC,EAAOC,SAAIC,KACXC,EAAKF,EAAGG,cAAaC,KAArBF,EAAQC,aAAaC,QAAQ,SAK/BL,GAAeM,UAAVC,GAMLP,EAAKO,UAAUC,OAAI,cACtBR,EAAAO,UAAAD,OAAA,UADGN,EAAKO,UAAUC,IAAI,aALnBR,EAAKO,UAAUC,IAAI,cACnBJ,EAAAA,UAAaK,OAAQ,WAJzBT,EAKOO,UAAAC,IAAA,UACHX,aAAKU,QAAL,QAAsB,UAOtBN,EAAAS,iBAAgBb,QAAKU,WAErBN,EAAIM,UAAUC,OAAI,cAClBG,IAAAA,EAAWd,EAAAU,UAAAK,SAAA,cAAAX,EAAoCM,UAA/CC,IAAA,QAEAR,WAAKO,WAAAA,OAAUD,EAAfC,UAA6BD,OAAG,SAAY,KAE5CF,EAAAA,UAAaK,OAAQI,EAASA,UAAU,UAT5Cb,EAAAO,UAAAC,IAAAK,EAAA,SAAA,WAlBAT,aAiCAK,QAAA,QAAAI,EAAA,QAAA,UAhCA,GAqCA,IAAMC,SAAahB,SAASI,cAAc,cAHpCa,UAAYjB,SAASI,cAAc,gBAMnCc,WAAWlB,SAASmB,cAAc,WACxCD,QAAclB,SAAdI,cAAA,YACAc,WAAAlB,SAAAI,cAAA,UAUMgB,SAAapB,SAASI,cAAc,OAC1Cc,SAAMG,GAAS,YAXfH,SAASI,UAAT,qJAOAtB,SAASD,KAAKwB,YAAYL,UAatBG,IAAAA,aAAUC,SAAYlB,cAAA,kBAD1BgB,WAEepB,SAAKI,cAAS,gBACzBiB,UAAUC,SAAYlB,cAAA,eAGzB,SAAAoB,UAAAC,GAAA,IAAAC,EAAA,EAAAC,UAAAC,aAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAA,UAAAG,EAAA,EAAAH,UAAAC,aAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAA,KAVDI,aAAaC,YAAcP,EAY3BP,SAAAA,UAAmBR,SAEnBW,UAAMY,UAAYpB,GAEViB,YAAJJ,EAFwBL,UAA5BC,UAAA,mEARoB,UAATI,EAaXN,UAAWc,UAAU,mEACJD,YAAbE,IACAjB,UAAST,UAAUD,4EAGtBU,SAEDT,UAAAC,IAAA,UAZA,IAAMuB,EAAYpB,WAAW,WAazBuB,SAAJ3B,UAAcD,OAAA,UACd4B,GAASxB,KACL,KAVJQ,WAAWc,QAAU,WAajBC,aAAYF,GACZT,SAAAA,UAAUhB,OAAA,UACVsB,GAAAA,KAIAM,UACAA,SAAAxB,iBAAoByB,QAAW/B,WAV/B,IAAMgC,EAAWC,WAAWC,MAAMC,OAW9BC,EAAMC,WAAQC,MAAcH,OACA,GAAK,KAALH,GAAyBO,KAAdP,EAAX,CAIhC,IAAMQ,EAAAA,GACN,IAAA,IADAF,EAAAP,KAAAU,MAAAzC,aAAAC,QAAA,UALImC,MAAMC,QAAQC,KASdE,EAAAA,EAAWE,OAAA,SAAAC,GAAA,OAAAA,GAAAA,EAAAX,UAAAW,EAAAJ,YAEfrB,MAAAA,IAEC,IAFDsB,EAAAI,EAAAC,KAGC,SALDC,GAKC,OAAMA,EAAAd,WAAAA,GAAAc,EAAAP,WAAAA,IA1BXC,GAgCAxC,aAAAK,QAAA,cAAA0B,KAAAgB,UAAAP,IATItB,UAAS,iBAAA8B,OAAkBR,EAAUR,SAA5B,KAAyC,UAAW,WACzDiB,OAAOC,SAASC,KAAO,gBAW3BjC,UAAW,gCAAX,cAtBgCA,UAA5B,2CAAA,aA4BJP,WACCA,UAAAL,iBAAA,QAAA,WAPD,IAAM8C,EAAQC,QAAQnB,MAAMC,OAStBmB,EAAYrB,WAAGC,MAAAC,OAPfI,EAAW7B,WAAWwB,MAAMC,OASlCjB,GAAU,KAAVA,GAAU,KAAAc,GAAuC,KAAvCO,EAAVrB,CAKA,GAPqB,6BAOjBqC,KAAAH,GAAJ,CAGgC,IAAAR,EAAA,GAAA,IAC/B,IAAAN,EAAAP,KAAAU,MAAAzC,aAAAC,QAAA,UACCmC,MAAAC,QAAAC,KAFEM,EAAQN,EAAYI,OAAO,SAAAC,GAAC,OAAIA,GAAKA,EAAEX,UAAYW,EAAES,OAAST,EAAEJ,YAKpE,MAAAiB,IAMC,GAPkBZ,EAAMa,KAIzB,SAAAX,GAAA,OAAIY,EAAJ1B,WAAgBA,GAAAc,EAAAM,QAAAA,IAIhBlC,UAAA,8CAAA,UAAA,WACC+B,OAAAC,SAAAC,KAAA,qBAFA,CAIkCZ,IAAAA,EAAAA,CAAAA,MAAAA,EAAAA,SAAAA,EAAAA,SAAAA,GAAnBK,EAAhBe,KAAAC,GACAhB,aAAWgB,QAAX,QAAA7B,KAAAgB,UAAAH,IAGA1B,UAAS,0CAAA8B,OAAAhB,EAAA,KAA2CA,UAAa,WACjEiB,OAAAA,SAAOC,KAAP,uBAtBAhC,UAAMoB,sCAAsCrC,gBAL5CiB,UAAA,6BAAA,aAiCJ+B,OAAO3C,iBAAiB,WAAY,SAAAuD,IAKhCA,EAAAC,WACA,iBAAAb,YAAOC,iBAAiB,cAAxB,GAAA9B,MAEHpB,aAAAC,QAAA,gBAGDgD,OAAAC,SAAAa,QAAA,kBAMI,IAAAC,eAAaC,SAAcC,cAAa,mBACxCD,cAAcE,SAAarE,cAA3B,UACAkE,gBAAe7D,eAClB6D,eAJD1D,iBAAA,QAAA,WAKC,IAAAc,EAAA,aAAA6C,cAAAC,aAAA,QAAA,OAAA,WAHGD,cAAcE,aAAa,OAAQ/C,GACnC4C,eAAe7D,UAAUiE,OAAO","file":"login.min.js","sourcesContent":["\"use strict\";\r\n\r\n// Change Mood\r\n(function(){\r\nconst btn = document.getElementById('theme-toggle');\r\nconst body = document.body;\r\nconst icon = btn.querySelector('i');\r\nconst saved = localStorage.getItem('theme');\r\n\r\n\r\nif (!saved || saved === 'light') {\r\n    body.classList.add('light-mode');\r\n    icon.classList.remove('fa-moon');\r\n    icon.classList.add('fa-sun');\r\n    localStorage.setItem('theme', 'light');\r\n} else {\r\n    body.classList.remove('light-mode');\r\n    icon.classList.remove('fa-sun');\r\n    icon.classList.add('fa-moon');\r\n}\r\n\r\nbtn.addEventListener('click', () => {\r\n    body.classList.toggle('light-mode');\r\n    const isLight = body.classList.contains('light-mode');\r\n\r\n    btn.classList.add('glow');\r\n    setTimeout(() => btn.classList.remove('glow'), 420);\r\n\r\n    icon.classList.remove(isLight ? 'fa-moon' : 'fa-sun');\r\n    icon.classList.add(isLight ? 'fa-sun' : 'fa-moon');\r\n    localStorage.setItem('theme', isLight ? 'light' : 'dark');\r\n});\r\n})();\r\n\r\n\r\n\r\n// ====== Page elements = =====\r\nconst loginBtn = document.querySelector(\"#login-btn\");\r\nconst signUpBtn = document.querySelector(\"#sign-up-btn\");\r\nconst usernameIn = document.querySelector(\"#userid\");\r\nconst emailIn = document.querySelector(\"#emailid\");\r\nconst passwordIn = document.querySelector(\"#pswrd\");\r\n\r\n// ====== Create a popup window ======\r\nconst popupBox = document.createElement(\"div\");\r\npopupBox.id = \"popup-box\";\r\npopupBox.innerHTML = `\r\n<div class=\"popup-content\">\r\n    <div id=\"popup-icon\"></div>\r\n    <p id=\"popup-message\"></p>\r\n    <button id=\"popup-close\">OK</button>\r\n</div>\r\n`;\r\ndocument.body.appendChild(popupBox);\r\n\r\nconst popupMessage = document.querySelector(\"#popup-message\");\r\nconst popupClose = document.querySelector(\"#popup-close\");\r\nconst popupIcon = document.querySelector(\"#popup-icon\");\r\n\r\n// ====== Message Display Function ======\r\nfunction showPopup(message, type = \"success\", callback = null) {\r\npopupMessage.textContent = message;\r\npopupBox.className = \"active\";\r\npopupIcon.className = \"\"; \r\n\r\nif (type === \"success\") {\r\n    popupIcon.innerHTML = '<i class=\"fa-solid fa-circle-check\" style=\"color: #4CAF50;\"></i>';\r\n} else if (type === \"error\") {\r\n    popupIcon.innerHTML = '<i class=\"fa-solid fa-circle-xmark\" style=\"color: #f44336;\"></i>';\r\n} else if (type === \"warning\") {\r\n    popupIcon.innerHTML = '<i class=\"fa-solid fa-triangle-exclamation\" style=\"color: #ff9800;\"></i>';\r\n}\r\n\r\npopupBox.classList.add(\"active\");\r\n\r\nconst autoClose = setTimeout(() => {\r\n    popupBox.classList.remove(\"active\");\r\n    if (callback) callback();\r\n}, 3000);\r\n\r\npopupClose.onclick = () => {\r\n    clearTimeout(autoClose);\r\n    popupBox.classList.remove(\"active\");\r\n    if (callback) callback();\r\n};\r\n}\r\n\r\n// ====== Sign In ======\r\nif (loginBtn) {\r\nloginBtn.addEventListener(\"click\", function () {\r\n    const username = usernameIn.value.trim();\r\n    const password = passwordIn.value.trim();\r\n\r\n    if (username === \"\" || password === \"\") {\r\n    showPopup(\"Please enter your username and password!\", \"warning\");\r\n    return;\r\n    }\r\n\r\n    let users = [];\r\n    try {\r\n    const storedUsers = JSON.parse(localStorage.getItem(\"users\"));\r\n    if (Array.isArray(storedUsers)) {\r\n        users = storedUsers.filter(u => u && u.username && u.password);\r\n    }\r\n    } catch {}\r\n\r\n    const foundUser = users.find(\r\n    (user) => user.username === username && user.password === password\r\n    );\r\n\r\n    if (foundUser) {\r\n    localStorage.setItem(\"currentUser\", JSON.stringify(foundUser));\r\n    showPopup(`Welcome back, ${foundUser.username}!`, \"success\", () => {\r\n        window.location.href = \"index.html\";\r\n    });\r\n    } else {\r\n    showPopup(\"Invalid username or password!\", \"error\");\r\n    }\r\n});\r\n}\r\n\r\n// ====== Create a new account (Sign Up) ======\r\nif (signUpBtn) {\r\nsignUpBtn.addEventListener(\"click\", function () {\r\n    const email = emailIn.value.trim();\r\n    const username = usernameIn.value.trim();\r\n    const password = passwordIn.value.trim();\r\n\r\n    if (email === \"\" || username === \"\" || password === \"\") {\r\n    showPopup(\"Please fill in all fields!\", \"warning\");\r\n    return;\r\n    }\r\n\r\n    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailPattern.test(email)) {\r\n    showPopup(\"Please enter a valid email address!\", \"warning\");\r\n    return;\r\n    }\r\n\r\n    let users = [];\r\n    try {\r\n    const storedUsers = JSON.parse(localStorage.getItem(\"users\"));\r\n    if (Array.isArray(storedUsers)) {\r\n        users = storedUsers.filter(u => u && u.username && u.email && u.password);\r\n    }\r\n    } catch {}\r\n\r\n    const userExists = users.some(\r\n    (user) => user.username === username || user.email === email\r\n    );\r\n\r\n    if (userExists) {\r\n    showPopup(\"This account already exists. Please log in.\", \"warning\", () => {\r\n        window.location.href = \"sign-in.html\";\r\n    });\r\n    return;\r\n    }\r\n\r\n    const newUser = { email, username, password };\r\n    users.push(newUser);\r\n    localStorage.setItem(\"users\", JSON.stringify(users));\r\n\r\n    showPopup(`Account created successfully! Welcome, ${username}.`, \"success\", () => {\r\n    window.location.href = \"sign-in.html\";\r\n    });\r\n});\r\n}\r\n\r\n// ====== Protection from reversing without registration ======\r\nwindow.addEventListener(\"pageshow\", (e) => {\r\nif (\r\n    e.persisted ||\r\n    performance.getEntriesByType(\"navigation\")[0].type === \"back_forward\"\r\n) {\r\n    if (!localStorage.getItem(\"currentUser\")) {\r\n    window.location.replace(\"sign-in.html\");\r\n    }\r\n}\r\n});\r\n\r\n// ====== Show/Hide Password ======\r\n\r\nconst togglePassword = document.querySelector(\"#togglePassword\");\r\nconst passwordField = document.querySelector(\"#pswrd\");\r\nif (togglePassword && passwordField) {\r\ntogglePassword.addEventListener(\"click\", () => {\r\n    const type = passwordField.getAttribute(\"type\") === \"password\" ? \"text\" : \"password\";\r\n    passwordField.setAttribute(\"type\", type);\r\n    togglePassword.classList.toggle(\"fa-eye-slash\");\r\n});\r\n}\r\n"]}