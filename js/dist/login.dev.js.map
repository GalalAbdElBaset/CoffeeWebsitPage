{"version":3,"sources":["login.js"],"names":["btn","document","getElementById","body","icon","querySelector","saved","localStorage","getItem","classList","add","remove","setItem","addEventListener","toggle","isLight","contains","setTimeout","loginBtn","signUpBtn","usernameIn","emailIn","passwordIn","popupBox","createElement","id","innerHTML","appendChild","popupMessage","popupClose","popupIcon","showPopup","message","type","callback","textContent","className","autoClose","onclick","clearTimeout","username","value","trim","password","users","storedUsers","JSON","parse","Array","isArray","filter","u","foundUser","find","user","stringify","window","location","href","email","emailPattern","test","userExists","some","newUser","push","e","persisted","performance","getEntriesByType","replace","togglePassword","passwordField","getAttribute","setAttribute"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\n// Change Mood\r\n(function(){\r\nconst btn = document.getElementById('theme-toggle');\r\nconst body = document.body;\r\nconst icon = btn.querySelector('i');\r\nconst saved = localStorage.getItem('theme');\r\n\r\n\r\nif (!saved || saved === 'light') {\r\n    body.classList.add('light-mode');\r\n    icon.classList.remove('fa-moon');\r\n    icon.classList.add('fa-sun');\r\n    localStorage.setItem('theme', 'light');\r\n} else {\r\n    body.classList.remove('light-mode');\r\n    icon.classList.remove('fa-sun');\r\n    icon.classList.add('fa-moon');\r\n}\r\n\r\nbtn.addEventListener('click', () => {\r\n    body.classList.toggle('light-mode');\r\n    const isLight = body.classList.contains('light-mode');\r\n\r\n    btn.classList.add('glow');\r\n    setTimeout(() => btn.classList.remove('glow'), 420);\r\n\r\n    icon.classList.remove(isLight ? 'fa-moon' : 'fa-sun');\r\n    icon.classList.add(isLight ? 'fa-sun' : 'fa-moon');\r\n    localStorage.setItem('theme', isLight ? 'light' : 'dark');\r\n});\r\n})();\r\n\r\n\r\n\r\n// ====== Page elements = =====\r\nconst loginBtn = document.querySelector(\"#login-btn\");\r\nconst signUpBtn = document.querySelector(\"#sign-up-btn\");\r\nconst usernameIn = document.querySelector(\"#userid\");\r\nconst emailIn = document.querySelector(\"#emailid\");\r\nconst passwordIn = document.querySelector(\"#pswrd\");\r\n\r\n// ====== Create a popup window ======\r\nconst popupBox = document.createElement(\"div\");\r\npopupBox.id = \"popup-box\";\r\npopupBox.innerHTML = `\r\n<div class=\"popup-content\">\r\n    <div id=\"popup-icon\"></div>\r\n    <p id=\"popup-message\"></p>\r\n    <button id=\"popup-close\">OK</button>\r\n</div>\r\n`;\r\ndocument.body.appendChild(popupBox);\r\n\r\nconst popupMessage = document.querySelector(\"#popup-message\");\r\nconst popupClose = document.querySelector(\"#popup-close\");\r\nconst popupIcon = document.querySelector(\"#popup-icon\");\r\n\r\n// ====== Message Display Function ======\r\nfunction showPopup(message, type = \"success\", callback = null) {\r\npopupMessage.textContent = message;\r\npopupBox.className = \"active\";\r\npopupIcon.className = \"\"; \r\n\r\nif (type === \"success\") {\r\n    popupIcon.innerHTML = '<i class=\"fa-solid fa-circle-check\" style=\"color: #4CAF50;\"></i>';\r\n} else if (type === \"error\") {\r\n    popupIcon.innerHTML = '<i class=\"fa-solid fa-circle-xmark\" style=\"color: #f44336;\"></i>';\r\n} else if (type === \"warning\") {\r\n    popupIcon.innerHTML = '<i class=\"fa-solid fa-triangle-exclamation\" style=\"color: #ff9800;\"></i>';\r\n}\r\n\r\npopupBox.classList.add(\"active\");\r\n\r\nconst autoClose = setTimeout(() => {\r\n    popupBox.classList.remove(\"active\");\r\n    if (callback) callback();\r\n}, 3000);\r\n\r\npopupClose.onclick = () => {\r\n    clearTimeout(autoClose);\r\n    popupBox.classList.remove(\"active\");\r\n    if (callback) callback();\r\n};\r\n}\r\n\r\n// ====== Sign In ======\r\nif (loginBtn) {\r\nloginBtn.addEventListener(\"click\", function () {\r\n    const username = usernameIn.value.trim();\r\n    const password = passwordIn.value.trim();\r\n\r\n    if (username === \"\" || password === \"\") {\r\n    showPopup(\"Please enter your username and password!\", \"warning\");\r\n    return;\r\n    }\r\n\r\n    let users = [];\r\n    try {\r\n    const storedUsers = JSON.parse(localStorage.getItem(\"users\"));\r\n    if (Array.isArray(storedUsers)) {\r\n        users = storedUsers.filter(u => u && u.username && u.password);\r\n    }\r\n    } catch {}\r\n\r\n    const foundUser = users.find(\r\n    (user) => user.username === username && user.password === password\r\n    );\r\n\r\n    if (foundUser) {\r\n    localStorage.setItem(\"currentUser\", JSON.stringify(foundUser));\r\n    showPopup(`Welcome back, ${foundUser.username}!`, \"success\", () => {\r\n        window.location.href = \"index.html\";\r\n    });\r\n    } else {\r\n    showPopup(\"Invalid username or password!\", \"error\");\r\n    }\r\n});\r\n}\r\n\r\n// ====== Create a new account (Sign Up) ======\r\nif (signUpBtn) {\r\nsignUpBtn.addEventListener(\"click\", function () {\r\n    const email = emailIn.value.trim();\r\n    const username = usernameIn.value.trim();\r\n    const password = passwordIn.value.trim();\r\n\r\n    if (email === \"\" || username === \"\" || password === \"\") {\r\n    showPopup(\"Please fill in all fields!\", \"warning\");\r\n    return;\r\n    }\r\n\r\n    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailPattern.test(email)) {\r\n    showPopup(\"Please enter a valid email address!\", \"warning\");\r\n    return;\r\n    }\r\n\r\n    let users = [];\r\n    try {\r\n    const storedUsers = JSON.parse(localStorage.getItem(\"users\"));\r\n    if (Array.isArray(storedUsers)) {\r\n        users = storedUsers.filter(u => u && u.username && u.email && u.password);\r\n    }\r\n    } catch {}\r\n\r\n    const userExists = users.some(\r\n    (user) => user.username === username || user.email === email\r\n    );\r\n\r\n    if (userExists) {\r\n    showPopup(\"This account already exists. Please log in.\", \"warning\", () => {\r\n        window.location.href = \"sign-in.html\";\r\n    });\r\n    return;\r\n    }\r\n\r\n    const newUser = { email, username, password };\r\n    users.push(newUser);\r\n    localStorage.setItem(\"users\", JSON.stringify(users));\r\n\r\n    showPopup(`Account created successfully! Welcome, ${username}.`, \"success\", () => {\r\n    window.location.href = \"sign-in.html\";\r\n    });\r\n});\r\n}\r\n\r\n// ====== Protection from reversing without registration ======\r\nwindow.addEventListener(\"pageshow\", (e) => {\r\nif (\r\n    e.persisted ||\r\n    performance.getEntriesByType(\"navigation\")[0].type === \"back_forward\"\r\n) {\r\n    if (!localStorage.getItem(\"currentUser\")) {\r\n    window.location.replace(\"sign-in.html\");\r\n    }\r\n}\r\n});\r\n\r\n// ====== Show/Hide Password ======\r\n\r\nconst togglePassword = document.querySelector(\"#togglePassword\");\r\nconst passwordField = document.querySelector(\"#pswrd\");\r\nif (togglePassword && passwordField) {\r\ntogglePassword.addEventListener(\"click\", () => {\r\n    const type = passwordField.getAttribute(\"type\") === \"password\" ? \"text\" : \"password\";\r\n    passwordField.setAttribute(\"type\", type);\r\n    togglePassword.classList.toggle(\"fa-eye-slash\");\r\n});\r\n}\r\n"],"file":"login.dev.js"}